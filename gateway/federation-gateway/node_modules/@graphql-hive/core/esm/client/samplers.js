import { dynamicSampling } from './sampling.js';
/**
 * Every operation is reported at least once, but every next occurrence is decided by the sampler.
 */
export function atLeastOnceSampler(config) {
    const sampler = dynamicSampling(config.sampler);
    const reportedKeys = new Set();
    return function shouldInclude(context) {
        const key = config.keyFn(context);
        if (!reportedKeys.has(key)) {
            reportedKeys.add(key);
            return true;
        }
        return sampler(context);
    };
}
